
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>

    <title>UNotes</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="starter-template.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="js/ie-emulation-modes-warning.js"></script>
    
    <script src="http://mrrio.github.io/jsPDF/dist/jspdf.debug.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!--<style>
     
    .btn:focus, .btn:active:focus, .btn.active:focus {
        outline: 0 none;
    }
     
    .btn-primary {
        background: #67992b;
        color: #ffffff;
        border-color: #354f17;
    }
     
    .btn-primary:hover, .btn-primary:focus, .btn-primary:active, .btn-primary.active, .open > .dropdown-toggle.btn-primary {
        background: #354f17;
    }
    
    .btn-primary:hover, .btn-primary:focus, .btn-primary:active, .btn-primary.active, .open > .dropdown-toggle.btn-primary {
        background: #354f17;
    }
     
    .btn-primary:active, .btn-primary.active {
        background: #354f17;
        box-shadow: none;
    }
    
    
    </style>-->
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    
    <!--
    <script src="js/jspdf.js"></script>
    <script src="js/FileSaver.js"></script>
    <script src="js/FromHTML.js"></script>
    -->
    
    <script src="http://mrrio.github.io/jsPDF/dist/jspdf.debug.js"></script>
    <script>
        function textAdded(method) {
            document.getElementById('part2').style.display = 'block';
            document.getElementById('part2').focus();
            
            ifrm = document.createElement("IFRAME");
            var datauristring = "data:application/pdf;base64,JVBERi0xLjMKMyAwIG9iago8PC9UeXBlIC9QYWdlCi9QYXJlbnQgMSAwIFIKL1Jlc291cmNlcyAyIDAgUgovQ29udGVudHMgNCAwIFI+PgplbmRvYmoKNCAwIG9iago8PC9MZW5ndGggMTIyPj4Kc3RyZWFtCjAuNTcgdwowIEcKQlQKL0YxIDE2IFRmCjE2IFRMCjAgZwoyOC4zNSA4MTMuNTQgVGQKKEhlbGxvIHdvcmxkISBUaGlzIGlzIGEgYmxhbmsgUERGIHdpdGhvdXQgYW55IHNwZWNpYWwgZm9ybWF0dGluZy4pIFRqCkVUCmVuZHN0cmVhbQplbmRvYmoKMSAwIG9iago8PC9UeXBlIC9QYWdlcwovS2lkcyBbMyAwIFIgXQovQ291bnQgMQovTWVkaWFCb3ggWzAgMCA1OTUuMjggODQxLjg5XQo+PgplbmRvYmoKNSAwIG9iago8PC9CYXNlRm9udC9IZWx2ZXRpY2EvVHlwZS9Gb250Ci9FbmNvZGluZy9TdGFuZGFyZEVuY29kaW5nCi9TdWJ0eXBlL1R5cGUxPj4KZW5kb2JqCjYgMCBvYmoKPDwvQmFzZUZvbnQvSGVsdmV0aWNhLUJvbGQvVHlwZS9Gb250Ci9FbmNvZGluZy9TdGFuZGFyZEVuY29kaW5nCi9TdWJ0eXBlL1R5cGUxPj4KZW5kb2JqCjcgMCBvYmoKPDwvQmFzZUZvbnQvSGVsdmV0aWNhLU9ibGlxdWUvVHlwZS9Gb250Ci9FbmNvZGluZy9TdGFuZGFyZEVuY29kaW5nCi9TdWJ0eXBlL1R5cGUxPj4KZW5kb2JqCjggMCBvYmoKPDwvQmFzZUZvbnQvSGVsdmV0aWNhLUJvbGRPYmxpcXVlL1R5cGUvRm9udAovRW5jb2RpbmcvU3RhbmRhcmRFbmNvZGluZwovU3VidHlwZS9UeXBlMT4+CmVuZG9iago5IDAgb2JqCjw8L0Jhc2VGb250L0NvdXJpZXIvVHlwZS9Gb250Ci9FbmNvZGluZy9TdGFuZGFyZEVuY29kaW5nCi9TdWJ0eXBlL1R5cGUxPj4KZW5kb2JqCjEwIDAgb2JqCjw8L0Jhc2VGb250L0NvdXJpZXItQm9sZC9UeXBlL0ZvbnQKL0VuY29kaW5nL1N0YW5kYXJkRW5jb2RpbmcKL1N1YnR5cGUvVHlwZTE+PgplbmRvYmoKMTEgMCBvYmoKPDwvQmFzZUZvbnQvQ291cmllci1PYmxpcXVlL1R5cGUvRm9udAovRW5jb2RpbmcvU3RhbmRhcmRFbmNvZGluZwovU3VidHlwZS9UeXBlMT4+CmVuZG9iagoxMiAwIG9iago8PC9CYXNlRm9udC9Db3VyaWVyLUJvbGRPYmxpcXVlL1R5cGUvRm9udAovRW5jb2RpbmcvU3RhbmRhcmRFbmNvZGluZwovU3VidHlwZS9UeXBlMT4+CmVuZG9iagoxMyAwIG9iago8PC9CYXNlRm9udC9UaW1lcy1Sb21hbi9UeXBlL0ZvbnQKL0VuY29kaW5nL1N0YW5kYXJkRW5jb2RpbmcKL1N1YnR5cGUvVHlwZTE+PgplbmRvYmoKMTQgMCBvYmoKPDwvQmFzZUZvbnQvVGltZXMtQm9sZC9UeXBlL0ZvbnQKL0VuY29kaW5nL1N0YW5kYXJkRW5jb2RpbmcKL1N1YnR5cGUvVHlwZTE+PgplbmRvYmoKMTUgMCBvYmoKPDwvQmFzZUZvbnQvVGltZXMtSXRhbGljL1R5cGUvRm9udAovRW5jb2RpbmcvU3RhbmRhcmRFbmNvZGluZwovU3VidHlwZS9UeXBlMT4+CmVuZG9iagoxNiAwIG9iago8PC9CYXNlRm9udC9UaW1lcy1Cb2xkSXRhbGljL1R5cGUvRm9udAovRW5jb2RpbmcvU3RhbmRhcmRFbmNvZGluZwovU3VidHlwZS9UeXBlMT4+CmVuZG9iagoyIDAgb2JqCjw8Ci9Qcm9jU2V0IFsvUERGIC9UZXh0IC9JbWFnZUIgL0ltYWdlQyAvSW1hZ2VJXQovRm9udCA8PAovRjEgNSAwIFIKL0YyIDYgMCBSCi9GMyA3IDAgUgovRjQgOCAwIFIKL0Y1IDkgMCBSCi9GNiAxMCAwIFIKL0Y3IDExIDAgUgovRjggMTIgMCBSCi9GOSAxMyAwIFIKL0YxMCAxNCAwIFIKL0YxMSAxNSAwIFIKL0YxMiAxNiAwIFIKPj4KL1hPYmplY3QgPDwKPj4KPj4KZW5kb2JqCjE3IDAgb2JqCjw8Ci9Qcm9kdWNlciAoanNQREYgMC45LjByYzIpCi9DcmVhdGlvbkRhdGUgKEQ6MjAxNjAxMjMxODQyMDMpCj4+CmVuZG9iagoxOCAwIG9iago8PAovVHlwZSAvQ2F0YWxvZwovUGFnZXMgMSAwIFIKL09wZW5BY3Rpb24gWzMgMCBSIC9GaXRIIG51bGxdCi9QYWdlTGF5b3V0IC9PbmVDb2x1bW4KPj4KZW5kb2JqCnhyZWYKMCAxOQowMDAwMDAwMDAwIDY1NTM1IGYgCjAwMDAwMDAyNTggMDAwMDAgbiAKMDAwMDAwMTQ5OSAwMDAwMCBuIAowMDAwMDAwMDA5IDAwMDAwIG4gCjAwMDAwMDAwODcgMDAwMDAgbiAKMDAwMDAwMDM0NSAwMDAwMCBuIAowMDAwMDAwNDM2IDAwMDAwIG4gCjAwMDAwMDA1MzIgMDAwMDAgbiAKMDAwMDAwMDYzMSAwMDAwMCBuIAowMDAwMDAwNzM0IDAwMDAwIG4gCjAwMDAwMDA4MjMgMDAwMDAgbiAKMDAwMDAwMDkxOCAwMDAwMCBuIAowMDAwMDAxMDE2IDAwMDAwIG4gCjAwMDAwMDExMTggMDAwMDAgbiAKMDAwMDAwMTIxMiAwMDAwMCBuIAowMDAwMDAxMzA1IDAwMDAwIG4gCjAwMDAwMDE0MDAgMDAwMDAgbiAKMDAwMDAwMTcyMyAwMDAwMCBuIAowMDAwMDAxODA1IDAwMDAwIG4gCnRyYWlsZXIKPDwKL1NpemUgMTkKL1Jvb3QgMTggMCBSCi9JbmZvIDE3IDAgUgo+PgpzdGFydHhyZWYKMTkwOQolJUVPRg==";
            ifrm.setAttribute("src", datauristring);
            ifrm.style.width = "100%";
            ifrm.style.height = "500px";
            $('#pdfviewholder').html(ifrm);
            
            if (method=="copyandpaste") {
                //process form text and send it to parsing algorithm 
            }else if (method=="fileupload") {
                //process uploaded file and send it to parsing algorithm
            }
            
            processText();
        }
        
        var outtext = "";
        
        function processText(){
            var str = document.getElementById('intext').value;
            var words = str.split(".");
            console.log(words);
            //["This", "is", "an", "amazing", "sentence."]
            var arrayLength = words.length;
            
            
            index=arrayLength-1;
            
            if (index > -1) {
                words.splice(index, 1);
            }
    
            arrayLength = words.length;
            
            for (var i = 0; i < arrayLength; i++) {
                //var old = document.getElementById('outtext').value;
                //document.getElementById('outtext').value = old + " - " + words[i] + "\n"
                
                var old = outtext;
                outtext = old + " - " + words[i] + "\n"
            }
        }
        
        function generatePreview() {
            var doc = new jsPDF();
            doc.text(10, 10, 'Update success!');
            
            //var iframe = document.getElementById('pdfviewholder');
            var datauristring = doc.output('datauristring');
            console.log(datauristring);
            //iframe.src = (datauristring);
            /*
            var pdf = new PDFObject({
              url: (datauristring),
              id: "pdfRendered",
              pdfOpenParams: {
                view: "FitH"
              }
            }).embed("pdfviewholder");
            */
            

            ifrm = document.createElement("IFRAME");
            ifrm.setAttribute("src", datauristring);
            ifrm.style.width = "100%";
            ifrm.style.height = "500px";
            $('#pdfviewholder').html(ifrm);
            
            //console.log(doc.output('datauristring'));
            //var preview=document.getElementById("pdfviewholder");
            //var clone=preview.cloneNode(true);
            //clone.setAttribute('src',(datauristring));
            //preview.parentNode.replaceChild(clone,preview)
        }
        
        function makePDF() {
            //var doc = new jsPDF();
            //doc.setFontSize(22);
            //doc.text(20, 20, 'This is a title');
            
            //doc.setFontSize(16);
            //doc.text(20, 30, 'This is some normal sized text underneath. This is some normal sized text underneath.  This is some normal sized text underneath.  This is some normal sized text underneath.  This is some normal sized text underneath.  This is some normal sized text underneath.');
            //doc.output('datauri');
            
            var doc = new jsPDF('p', 'in', 'letter');
            var source = $('#testcase').first();
            var specialElementHandlers = {
            '#bypassme': function(element, renderer) {
            return true;
            }
            };
             
            doc.fromHTML(
            source, // HTML string or DOM elem ref.
            0.5, // x coord
            0.5, // y coord
            {
            'width': 7.5, // max width of content on PDF
            'elementHandlers': specialElementHandlers
            });
             
            doc.output('dataurl');
            }

            
            //pdf.output('datauri');
            
            /*
            doc.setFontSize(16);
            doc.text(20, 30, outtext);
            
*/  

        
    </script>
  </head>

  <body><!-- Button trigger modal -->
    <div id="testcase">
 
<h1>
We support special element handlers. Register them with jQuery-style.
</h1>
 
</div>
  
  
  
    <!-- Modal for Upload -->
    <div class="modal fade" id="uploadModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Upload your Text</h4>
          </div>
          <div class="modal-body">
            <label for="exampleInputFile">Select your file:</label>
            <input type="file" id="exampleInputFile">
            <p class="help-block">Only .pdf, .doc, and .txt file are compatible.</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            <button onclick="textAdded('fileupload')" type="button"  data-dismiss="modal" class="btn btn-primary">Upload</button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Modal for TEXT-->
    <div class="modal fade" id="textModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Copy and Paste Text</h4>
          </div>
          <div class="modal-body">
            Paste the text you'd like to make into notes:
            <textarea class="form-control" id="intext" rows="12"></textarea>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            <button onclick="textAdded('copyandpaste')" type="button" data-dismiss="modal" class="btn btn-primary">Upload</button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Modal for URL-->
    <div class="modal fade" id="urlModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Copy and Paste Text</h4>
          </div>
          <div class="modal-body">
            Paste the URL below:
            <textarea class="form-control" rows="1"></textarea>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            <button onclick="textAdded('copyandpaste')" type="button" data-dismiss="modal" class="btn btn-primary">Upload</button>
          </div>
        </div>
      </div>
    </div>
    
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">UNotes</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">
        
        
    <!-- Part 1 -->
    <div>
      <div id="part1" class="starter-template">
        <h1><b>UNotes:</b> The Personal Study Notes Generator</h1>
        <p class="lead">Use this service to turn large sums of text into easily studied bullet point notes.<br>Export to a printable PDF file or create study sets on Quizlet.</p>
        <p>
        <div class="row" style="margin: auto;">
          <div class="col-md-4">
            <button  type="button" style=" width: 200px;  margin: 10px;" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#uploadModal">From File</button>
          </div>
          <div class="col-md-4">
            <button  type="button" style="width: 200px; margin: 10px;" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#textModal">From Raw Text</button>
          </div>
          <div class="col-md-4">
            <button  type="button" style="width: 200px; margin: 10px;" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#urlModal">From URL</button>
          </div>
        </div>
          
          </p>
        
      </div>
    </div> <!-- /. Part 1 -->
    
    <!-- Part 2 -->
    <div id="part2" style="display: none">
      <hr>
        <div class="part2container">
            <div class="row">
                <div class="col-xs-6">
                    <h2>Output Preferences:</h2>
                    <p>The form below contains three checkboxes. The last option is disabled:</p>
                    <form role="form">
                      <div class="checkbox">
                        <label><input type="checkbox" value="">Bold key terms?</label>
                      </div>
                      <div class="checkbox">
                        <label><input type="checkbox" value="">Assess the readibility and predict studying time?</label>
                      </div>
                      <div class="checkbox">
                        <label><input type="checkbox" value="" >Assess the amount learned?</label>
                      </div>
                      <div class="checkbox">
                        <label><input type="checkbox" value="" >Assess the topic of the text uploaded?</label>
                      </div>
                      </br>
                      Font size:
                      <div class="radio">
                        <label>
                          <input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked>
                          Small
                        </label>
                      </div>
                      <div class="radio">
                        <label>
                          <input type="radio" name="optionsRadios" id="optionsRadios2" value="option2">
                          Medium
                        </label>
                      </div>
                      <div class="radio">
                        <label>
                          <input type="radio" name="optionsRadios" id="optionsRadios3" value="option3" disabled>
                          Large
                        </label>
                      </div>
                      <button onclick="generatePreview()" type="button" style=" width: 200px;  margin: 10px;" class="btn btn-primary" >Preview</button>
                    </form>
                </div>
            <!--
                <div id="pdfviewholder" class="col-xs-6">
                    <embed id="#pdfViewer" name="plugin" type="application/pdf"
                    width="100%" height="500px" 
                    src="http://www.polyu.edu.hk/iaee/files/pdf-sample.pdf" /> 
                </div>
            -->
            <div id="pdfviewholder" class="col-xs-6">
            </div>
            
            </div>
            </br>
            <textarea class="form-control" id="outtext" rows="12"></textarea>
            
            <center>
            <button onclick="makePDF();"  type="button" style="width: 200px; margin: 10px;" class="btn btn-primary btn-lg"  >Make PDF</button>
            </center>
        </br>
        </div>           
    </div>
    </div><!-- /.container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery.min.js"><\/script>')</script>
    <script src="js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
